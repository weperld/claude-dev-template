# Gate 검증 시스템

> 각 개발 단계 간 전환 시 품질을 보장하기 위한 검증 게이트 시스템입니다.

---

## 1단계: 기획서 유형 분석

### 유형 A: 기능 수정 (Feature Fix/Enhancement)

**판단 기준:**
- ✅ 기존 기능의 버그 수정
- ✅ 기존 기능의 성능 개선
- ✅ 기존 기능의 사용성 개선
- ✅ 리팩토링 (기능 변화 없음)
- ✅ 호환성 이슈 수정

**분석 체크리스트:**
- [ ] 영향받는 Feature ID 확인
- [ ] 영향받는 파일 목록
- [ ] 영향받는 UI 요소
- [ ] 호환성 고려사항
- [ ] 기존 데이터 호환성 여부
- [ ] 테스트 방법

**자동 판단 키워드:**
- "버그", "오류", "수정", "개선", "최적화", "리팩토링"

---

### 유형 B: 새로운 기능 추가 (New Feature)

**판단 기준:**
- ✅ 완전히 새로운 카테고리
- ✅ 기존 카테고리의 새로운 컴포넌트
- ✅ 새로운 UI 요소 추가
- ✅ 새로운 데이터 모델 필요
- ✅ 새로운 API 추가

**분석 체크리스트:**
- [ ] 필요한 카테고리 결정 {{FEATURE_CATEGORIES}}
- [ ] 새로운 컴포넌트 필요 여부
- [ ] 새로운 ViewModel 필요 여부
- [ ] 새로운 View 필요 여부
- [ ] 설정 요구사항
- [ ] 템플릿 요구사항
- [ ] UI 흐름

**자동 판단 키워드:**
- "신규", "추가", "생성", "새로운", "기능"

---

## 2단계: 계획 수립

### 🚪 검증 게이트 시스템

```
Plan  → [Gate-1] → Design  → [Gate-2] → Code    → [Gate-3] → Test    → [Gate-4] → Docs  → [Gate-5] → QA    → [Gate-6] → Review → [Gate-7] → 완료
```

#### 검증 게이트 개요

| 게이트 | 검증 대상 | 자체 더블체크 | 크로스체크 에이전트 | 실패 시 롤백 |
|--------|----------|---------------|---------------------|--------------|
| Gate-1 | Plan → Design | analyst 2회 | architect 1회 | Plan 재계획 |
| Gate-2 | Design → Code | architect 2회 | developer 1회 | Plan 재계획 |
| Gate-3 | Code → Test | developer 2회 | reviewer 1회 | Design 재설계 |
| Gate-4 | Test → Docs | tester 2회 | developer 1회 | Code 재구현 |
| Gate-5 | Docs → QA | doc-manager 2회 | reviewer 1회 | Test 재수행 |
| Gate-6 | QA → Review | reviewer 2회 | architect 1회 | Code 재구현 |
| Gate-7 | Review → 완료 | coordinator 최종 | - | 적절 단계로 롤백 |

#### 게이트 통과 조건

**Gate-1 (Plan → Design)**
- ✅ 계획 명확성 검증
- ✅ 영향 파일 완전성 검증
- ✅ 위험 요소 식별 완료
- ✅ 사용자 승인 완료
- ✅ analyst 1차 검증
- ✅ analyst 2차 검증
- ✅ architect 크로스체크

**Gate-2 (Design → Code)**
- ✅ 순환 참조 없음
- ✅ 스택 오버플로우 안전
- ✅ 성능 O(n) 이하
- ✅ 스레드 안전성 보장
- ✅ 메모리 누수 없음
- ✅ 데이터 무결성 준수
- ✅ UI 프리징 방지
- ✅ 아키텍처 준수
- ✅ architect 1차 검증
- ✅ architect 2차 검증
- ✅ developer 크로스체크

**Gate-3 (Code → Test)**
- ✅ 빌드 성공 (Exit Code 0)
- ✅ 컴파일 에러 0개
- ✅ 컴파일 경고 < 5개 (심각 경고 0개)
- ✅ 참조 에러 0개
- ✅ 코드 스타일 준수
- ✅ 기술 규칙 준수 {{LANGUAGE_SPECIFIC_GATE_CHECKS}}
- ✅ developer 1차 빌드
- ✅ developer 2차 빌드
- ✅ reviewer 크로스 빌드

**Gate-4 (Test → Docs)**
- ✅ 빌드 테스트 통과
- ✅ 단위 테스트 통과율 100%
- ✅ 기능 테스트 통과
- ✅ 버그 0개 (또는 문서화된 버그만 존재)
- ✅ tester 1차 테스트
- ✅ tester 2차 테스트
- ✅ developer 재테스트

**Gate-5 (Docs → QA)**
- ✅ API 문서 완비
- ✅ 문서 생성 완료
- ✅ 사용자 가이드 완성
- ✅ 변경 로그 작성
- ✅ doc-manager 1차 검증
- ✅ doc-manager 2차 검증
- ✅ reviewer 크로스체크

**Gate-6 (QA → Review)**
- ✅ 코드 스타일 완벽 준수
- ✅ 아키텍처 완벽 준수
- ✅ 잠재적 버그 0개
- ✅ 성능 기준 충족
- ✅ 보안 취약점 0개
- ✅ reviewer 1차 리뷰
- ✅ reviewer 2차 리뷰
- ✅ architect 크로스 리뷰

**Gate-7 (Review → 완료)**
- ✅ 모든 게이트 통과
- ✅ 모든 체크박스 완료
- ✅ 사용자 승인
- ✅ coordinator 최종 검증

---

### 기능 수정 계획 템플릿

```markdown
## 📋 기능 수정 계획

### 문제 정의
- **현재 동작**: ...
- **예상 동작**: ...
- **발생 상황**: ...

### 수정 범위
- **영향 파일**:
  - {{PROJECT_FILE_STRUCTURE}}
- **수정 라인**: ...
- **테스트 방법**: ...

### 위험 요소
- [ ] 호환성 문제
- [ ] 데이터 무결성 영향
- [ ] 성능 영향

### 검증 계획
- **더블체크 계획**: 1차 검증 후 2차 검증
- **크로스체크 에이전트**: architect

### 예상 소요 시간
...

### 우선순위
- [ ] High
- [ ] Medium
- [ ] Low
```

---

### 새로운 기능 계획 템플릿

```markdown
## 📋 새로운 기능 추가 계획

### 기능 개요
- **기능 이름**: ...
- **카테고리**: {{FEATURE_CATEGORIES}}
- **설명**: ...

### 구현 파일
{{PROJECT_FILE_STRUCTURE}}

### 설정
- **필요한 경로 설정**: ...
- **필요한 템플릿**: ...

### UI 변경사항
- **새로운 화면**: ...
- **기존 화면 수정**: ...

### 구현 순서
1. Model 정의
2. 핵심 로직 구현
3. ViewModel 생성
4. View 생성
5. 통합
6. 테스트

### 위험 요소
...

### 검증 계획
- **더블체크 계획**: 각 단계별 1차, 2차 검증
- **크로스체크 에이전트**: architect (Gate-2), reviewer (Gate-3), developer (Gate-4)

### 예상 소요 시간
...
```

---

## 3단계: 사용자 확인

### 확인 형식

```
✅ 계획이 수립되었습니다.

[WorkID]: WIP-YYYYMMDD-NN
[유형]: (기능 수정 / 새로운 기능)

[계획 요약]
...

[영향 파일]
...

[위험 요소]
...

진행하시겠습니까? (y/n 또는 수정 요청)
```

### 확인 대기 시 에이전트 동작
- 사용자 "y" → 즉시 구현 시작
- 사용자 "n" → 취소 사유 문의
- 사용자 "수정 요청" → 계획 수정 후 재확인

---

## 📚 관련 모듈

- [PIPELINE.md](PIPELINE.md) - 7단계 개발 파이프라인
- [AUTO_UPDATE.md](AUTO_UPDATE.md) - WorkID 및 자동 업데이트 시스템
- [ERROR_HANDLING.md](ERROR_HANDLING.md) - 에러 처리 및 롤백 프로토콜
